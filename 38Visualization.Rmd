---
title: "38Visualization"
author: "赖奕杨"
date: "2021/10/9"
output:
  word_document: default
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# **一、介绍**
随着当今社会网络应用的普及,有效地分析大型网络的能力变得至关重要。然而,随着网络变得越来越复杂,通过简单的统计数据来推断社交动态并不是一个可行的选择。为了克服这些局限,可以依靠视觉隐喻。现在可视化不再是一个从一组数字中产生图像的被动过程。社交网络分析和可视化结合了互动,改变了理解和描述社交网络的方式。

在传统的情况下，分析通常是一个预处理步骤，可视化是一种表示工具，而在这种方法中，可视化可以对比原始数据和自动分析的大量、复杂的衍生量。分析人员在与这些可视化交互、聚类和过滤数据以搜索更合适的分析工具(其结果将反馈到可视化过程)的过程中获得对社会结构的洞察，等等。

本文中，根据提供给分析人员的洞察力(如结构、语义或统计)，给出了社交网络可视化的分类。然后，我们描述了分析与可视化结合的当前趋势，并提供了两个示例技术。在第一种方法中，语义和结构过滤与新的可视化相结合，以理解社会网络的结构和动态。在第二个示例中，中心性分析不仅提供了网络上有趣的统计信息，而且还积极地利用它来支持上一代可视化工具中没有想象到的新视图和过滤器。
![avatar](D:/360downloads/1.png)
*图11.1。不同类型的可视化示例(a)结构图，典型的是节点-链接图。(b)语义，其中节点和链接可以代表社会网络的不同方面。(c)统计，有助于描述社会网络指标的分布和(d)时间，一种以时间为主要属性的语义图的特殊情况。*

# **二、可视化分类**
根据可视化的目的，我们将社交网络的可视化分为四大类:结构（目前最常见的表示），语义（强调实体和关系的意义高于其结构），时间和统计。

## **1、结构可视化**
对社交网络的结构可视化就聚焦于它的结构。这种结构可以认为是一个图的拓扑结构，用于表示社会网络中的参与者和关系。主要的结构可视化方法有节点-链接图和面向矩阵的两种方法。前者对于节点之间链接的描述易于理解，后者则可以更好地利用有限的显示区域。

### **（1）网络布局可视化的价值**
可视化的目的是让用户了解社交动态的复杂性。因此，一方面，必须根据其对这一目标的价值进行评估。人们已经提出了许多布局算法，每种算法都有各自的优缺点。一般来说，我们可以突出一些布局必须满足的高级属性:(1)图中节点和链接的定位应该有利于网络的可读性。(2)节点的定位应该帮助揭露任何固有的网络。(3)节点的位置应该在社交网络的一个值得信赖的表示结果。

为满足这些高级属性，布局算法通常用低级属性来表示。最广泛的属性是节点的邻近性，这说明如果两个节点高度连接，它们应该一起出现。另一方面，可读性通常是通过确保节点和边界交叉之间的最小重叠来实现的。社交网络，尤其是因为支配其结构的幂律规定，大多数边缘发生在少数中心节点和大量非中心节点之间，因而可读性大受影响。

### **（2）节点连接图**
社交图已经成为形象化社交网络的事实上的标准。在这种表示中，参与者被表示为节点，采用几何形式，这些形式之间的关系用线表示。网络的不同属性可以通过几何属性进行可视化编码，如颜色、形状、大小和厚度。

当前社交网络可视化的挑战之一是如何有效地放置这些节点。随着社交网络的复杂性和规模的增长，找到一个好的布局越来越具有挑战性。因此，图形布局算法的研究对社交网络可视化的发展有着重要的影响。

**基于属性的布局。**

最简单的社交网络布局将节点属性的值赋值为坐标系统中的一个位置。这种布局很容易计算，并有助于发现该属性沿网络分布的模式，但它可能掩盖其全局结构。

由于径向布局的简单性，它十分流行。结合径向和其他布局，为用户提供视觉反馈。尽管如此，径向布局并不一定传达网络的结构，而且，当在这样的布局中绘制边时，混乱会掩盖可视化。为了提高径向布局的可读性，可以根据网络的层次结构将相关的边捆绑在一起。

径向布局的一个改进是目标社会图，它使用一个中心性度量作为半径。在这个社会图中，节点以同心圆的形式排列，最重要的节点在圆心附近，外围节点在外圆上。这种技术已经成功地体现在一个社会网络的可视化分析系统中，使用多种网络中心性和推广的图形布局。

**力导向和能量导向布局。**

力导向通过网络中的链接和节点将球体连接起来。力的设计是为了满足低级属性，保证最小的节点重叠和相关节点的接近。例如，引力通常存在于任何一对相连的节点之间，而排斥力则存在于所有节点之间。这种力系统的平衡状态导致节点在该坐标下的“最优”位置。作为以节点位移计算布局的一种替代方法，可以迭代更新节点的位置，直接最小化能量函数。

尽管被广泛使用，并且易于实现，强制布局仍然受到两个主要限制。一方面，它们的计算成本很高，因为计算时间随着网络中节点的数量呈立方增长。这使得它们即使对于只有数千个节点的简单现实社交网络也不可行。另一方面，可能更重要的是，对于大多数中等规模的网络来说，力导向布局通常会导致“毛球”，这是由于幂律分布。

**光谱布局。**

这种类型的算法是基于光谱代数的关键矩阵。它证明了某些矩阵的特征向量可以用作二维的嵌入。其最广泛的应用是利用邻接矩阵的特征向量。

### **（3）面向矩阵的技术**
面向矩阵的技术是一种可视化隐喻，旨在通过显式显示邻接矩阵或关联矩阵来表示社交网络。在这种可视化中，每个链接都被表示为一个网格位置，其笛卡尔坐标与网络中的节点相对应。颜色和不透明度通常用来表示重要的结构或语义量。因此，邻接矩阵的可视化表示比节点-链接图更紧凑，而且没有重叠，因为每个链接都没有重叠。

使用这种矩阵表示的挑战之一是使用户能够直观地识别网络中的局部和全局结构。一般来说，这取决于节点沿着矩阵视图的轴排列的方式。当节点的顺序任意时，矩阵视图可能不会显示数据中存在的集群。矩阵的重新排序依赖于给定的目标函数。如果我们遵循良好的网络可视化的高级期望属性，它应该保持集群在接近的位置。

### **（4）混合动力技术**
与邻接矩阵图相比，节点-链接图更容易解释，但邻接矩阵图通常更有效地显示网络密集的整体结构。这一发现导致了许多混合技术的出现，这些技术将面向矩阵的技术与节点-链接图相结合，试图克服与之相关的每个问题。

一种快速图布局，在受限的屏幕空间中描绘大型网络。一种混合方法，即节点首先沿着空间曲线在二维空间中定位。通过聚类分析确定节点在曲线上的位置，确保相关节点的接近性。图11.2(a)显示了一个例子。

邻接矩阵通常很难读懂。一个混合矩阵可以解决这个问题，其中一个基本层描述了一个邻接图，同时在不同的层上路径导航。使用传输映射作为隐喻，该可视化以可读的方式显示多对节点之间的路径。图11.2(b)给出了一个例子，描述了一家高科技公司的友谊网络中几个感兴趣的节点之间的路径。
![avatar](D:/360downloads/2.png)
*图11.2。混合可视化空间。(a)利用空间填充曲线快速布局大型网络(b)混合路径图和矩阵表示，提高了可视化的可读性和可扩展性。(c)节点矩阵可视化将节点链接图与邻接矩阵相结合，提高了密集子网络的可读性*

## **2、语义和时间可视化**
结构化可视化虽然统一了概述和细节信息的描述，但当社交网络变得更大时，它的有效性就会降低。由于高度连接的节点倾向于集中在显示的中心，节点链接图很快变得杂乱。由于这个原因，最近的方法集中在社交网络的一个不同方面:语义。这不是强调数据中发现的显式关系，而是代表了行动者和联系的高级属性和联系，或在数据中明确说明，或从交叉引用的外部来源中隐含推断。

### **（1）基于本体的可视化**
其中一种语义可视化是使用本体来表示社会网络中的参与者类型和关系。一个例子是Ontovis，其中典型的节点链接图通过本体的高级图形表示进行了增强。它的本体是图，其节点表示节点类型，链接表示表示类型。一旦已知本体，无论是显式给出还是从数据本身提取，一个社会网络就可以通过图中的关系表示出来。这种可视化的目标不一定是发现网络的结构属性，而是节点和链接的属性分布。

尽管数据透视图并不依赖于本体论，但它也有类似的目标。数据透视图不是通过节点和链接来表示结构信息，而是总结节点属性及其关系。使用透视表作为交互隐喻，这种可视化证明对探索多变量图是有效的。另一种依赖于参与者和链接含义的可视化类型是语义基础。语义基板是网络的空间布局，其中节点的位置取决于给定节点属性的值。多个语义基板可以同时显示，并根据某些感兴趣的链接的值连接在一起。因为节点的位置不再遵循网络的结构，而是遵循节点属性的实际价值，所以它更适合用于语义查询。

### **（2）颞可视化**
时间是一种特殊类型的语义信息。由于社会互动是一种依赖于时间的现象，用视觉手段来表示时间维度是很自然的。然而，动态网络的可视化还没有深入研究。原因之一是，仅从结构的角度处理时间维度是有限和不足的。这样看来语义方法更合适。但是，将时间作为维度应该与其他特定于数据的节点属性进行不同的处理。表示时间的困难之一是缺乏二维显示中描述动态网络的维度。作为另一种选择，我们可以精确地沿着时间维度来表示时间。
![avatar](D:/360downloads/3.png)
*图11.3。Kazaa社交网络的统计可视化。左:三个中心性度量的散点图矩阵。右:相同度量的边缘相关图。*

Mobivis通过交互式时间图增强了基于本体的可视化。这个时间图是一个面向像素的比喻，包含了网络中参与者的时间信息。在设计时态可视化时，其中一个挑战是合并时态数据可能不同的规模和可变的粒度。

PostHistory有助于可视化来自电子邮件交换的动态社交网络。可视化结合了一种面向像素的技术，类似于Mobivis中的时间图，它分别使用颜色和大小显示邮件随时间的相关性和数量。同时，一个可视化的以自我为中心的分层方式显示电子邮件联系人的社交网络。因为链接的实际结构并没有被明确地表示出来，所以这些可视化不会受到混乱的影响，并且对于动态网络来说非常有效。

## **3、统计可视化**
可视化的一个重要方面是分析工具和可视化工具之间的相互作用。这是视觉分析的核心。由于这个原因，分析人员经常探索总结可视化，以理解感兴趣的变量的分布。这些变量通常对应代表网络结构的网络统计数据，如度、中心性和聚类系数。前两个指标描述了整个网络的重要性，后一个指标表明了网络中节点的可聚性。

理解这些分布的一种方法是通过可视化摘要，如直方图。通过分析两个变量之间的联合分布，可以获得额外的见解，通常通过散点图，在笛卡尔坐标系中根据两个变量的值进行映射。这种方法虽然被广泛使用和实用，但仅限于二维关节分布。一般来说，网络统计形成一个n维空间，其中一个节点或一条边是一个观察，每个变量对应一个属性或度量。因此，想象这样的空间十分困难。如图11.3所示，散点图矩阵显示了n维空间中所有变量对的联合分布。每个位置ij显示了变量i和j的联合分布。这个可视化可以帮助我们看到马尔可夫中心性和程度之间的高相关性，而异常值并不影响度、中心性和度之间的相关性。

使用公共中心性度量的散点图矩阵，如亲密度、间度和程度，来理解生物网络中重要性的分布。另一种表示两两联合分布的方法是通过平行坐标。在这种情况下，每个数据点可以表示为一组线段，线段的端点是每个变量的值。在社会网络范围内，散点图在表示边缘相关性方面也很有用。在这种情况下,可以认为二维空间中的一个点代表一个边缘,给定属性的值是谁的x坐标的节点连接到边缘和y坐标相同的价值属性节点的另一端的边缘。

# **三、可视化、交互和分析的融合**
**可视化和分析。**通常，可视化被描述为一个漫长的分析过程的最后阶段。但这种情况正在改变。

聚类是可视化的一个方面，可视化和分析就属于这个方面。如上所述，社交网络的聚类分析驱动矩阵排序以获得有效的邻接矩阵视觉表示。对于节点-链接图也可以这样说。模块化(一种常用的集群度量方法)实际上是一个能量模型，在力指向布局中被最小化。这对可视化有重要的影响，因为布局的可视化外观的质量指标直接量化了集群的质量，这对分析很有用，反之亦然。因此，从网络中提取层次结构对可视化具有明显的优势。

**可视化和交互。**随着当今计算能力的发展，可视化发挥了更积极的作用。由于Facebook和Flickr等网站的流行，这种想法已经成为在线社交网络可视化的驱动力。但这类系统的需求不同于分析工具，有一些共同的特性:

（1）以自我为中心的观点为特征。基本的视觉空间不再是整个网络，而是视觉元素现在与给定的环境相关联。在自底向上的方法中，查询变成了不同交互工具的操作，例如按需扩展和收缩本地上下文。这已经成为一种与大型社交网络互动的流行设备，在touchgraph 等工具中也得到了体现。

（2）它们很好玩。由于在线社交网络工具的主要目的是帮助发现人群和了解社区结构，许多工具具有高度的交互性，这通常是好玩的。在产生静态的、被动的可视化时，交互性的需要证明了使用通常被认为是无效的实践是合理的。例如，力导向和能量导向的布局是常用的。Viszter和Touchgraph等工具依赖于力指向布局来表示网络的局部结构，并使交互能够按需扩展或收缩网络。在可视化空间周围拖动节点可以让用户根据布局随时间变化的方式识别社区结构。

（3）它们是动态的。社交网络本质上是动态的，其结构随着网络的发展而不断变化。可视化和交互以时间为主要维度。应对社交网络规模和时间复杂性的一个新兴解决方案是交互。通过交互操作，可以在不限制从这些视图中提取的知识的情况下改变空间和视觉表示。

在可视化、分析和交互方面还有两个其他方面。一方面，结构和语义过滤涉及一个连续的分析和可视化循环，在这个循环中，通过对简化和过滤后的数据进行可视化表示来获得洞察力。另一方面，通过对中心性和重要性的分析，可视化实践者可以设计和测试用于可视化探索社交网络的新颖表示和交互技术。
![avatar](D:/360downloads/4.png)
*图11.4。电影社交网络的语义过滤。*

## **1、使用本体进行结构和语义过滤**
在当前的可视化工具中，常见的是将全局结构描述为网络的概述。交互式工具通常允许分析人员对数据进行转换，试图克服杂乱和重叠的问题。一个这样的例子就是删除不重要的节点和边。这就产生了一个抽象网络，它只保留了网络中的关键角色。在更复杂的网络中，这种抽象可能会随着不同的关键属性而被认为是重要的一些参与者，通常依赖于手头的数据和任务。本体论将特定的类型与可以用来获得更高层次抽象的节点和链接联系起来。基于此本体，作者计算了一个结构度量，用以描述给定节点的链接差异。这种差异，以给定类型节点的连通性方差衡量，表明特定节点与特定类型或其他相同类型节点的连接是弱的还是强的。此外，分析人员可以直接与本体交互，突出或删除特定类型的节点和边缘。与纯粹的结构方法不同，随着网络变得越来越复杂，这种集成的交互方法具有更大的可伸缩性。

图11.4显示了一个电影网络的例子，这是一个异构数据集，连接演员、导演、电影、类型和角色等。图11.4(a)所示的本体显示了不同节点类型之间的关系。在这种情况下，一个人用蓝色表示，一部电影用橙色表示，一个角色用红色表示。节点的大小表示其差异。图11.4(a)还显示了一个语义查询的可视化结果，该查询选择了所有扮演过英雄、科学家、恋爱对象、伙伴和懦弱角色的人。即使在如此小的范围内，杂乱也会使图像难以阅读。如图11.4(b)所示，接下来是一个结构过滤，它删除级别1的节点和重复的路径。现在我们看到个别演员，比如伍迪·艾伦，他演过三个不同的角色。这种洞察力促使分析人士探索网络的另一个维度，他在哪些电影中扮演了这些角色，以及它们对应的类型。这是通过与本体图交互，选择相应的节点类型来实现的。结果可视化如图11.4(c)所示。

## **2、基于中心性的视觉发现与探索**
从结构的角度来看，节点中心性是对节点重要性的度量。度量指标如度、间度、亲密度和特征向量中心性提供了节点的连接数、最短路径或随机游动长度的排序[14,3,4]。中心性提供了节点的连接数、最短路径或随机游动长度的排序[14,3,4]。

一种简单的方法是根据节点的中心性对节点进行分类。使用颜色和大小可以突出显示可视化中的重要节点。其他技术根据中心性来设计节点的布局。例如，利用中心性度量来概括目标社会图，使中心节点位于同心节点的内部，外围节点位于外围区域。

另一种方法是测量边缘的中心性。与节点类似，边可以根据连接它们的节点的重要性、通过它们的最短路径的数量或它们在网络中出现的随机行走的概率来排序。将视觉表示简化为之间边的最小生成树。每种方法都强调了网络中不同的结构，这些结构对分析和理解是有效的。然而，由于某些边缘中心性(如边缘间性)不一定是可靠的，因此应用于现实社会网络时，结果也会有所不同。虽然边缘中心性在星形图中突出了重要的簇内和簇间关系，但它们经常错误地表示网络密集部分的簇内部。

最近，我们提出了一种基于节点中心性导数的鲁棒性更好的方法。中心性导数表示一个节点的重要性对所有其他节点重要性的敏感性。通过测量一个节点对所有其他节点的影响，我们可以提取对用户可能很重要的信息。例如，我们已经应用这种技术来发现社交网络中的隐藏链接。当两个节点在很大程度上相互关联，但又不直接连接时，就会产生隐藏链接。这种类型的关系经常发生在集群中心或代表之间。例如，我们将这种技术应用于一个合成数据集，该数据集“隐藏”了一个社会网络的结构，似乎是两个完全不同的群体。我们将中心性度量导数定义为矩阵S，其元素(i, j)定义为:
$$ s_{ij}=\frac{∂C(v_i)}{∂t_j} $$
其中$C(v_i)$为顶点$v_i$的中心性，$t_j$为节点j的参数化变量，如度。这种定义假设中心性度量可以用t表示为连续函数。对于许多度量，如度和中间度，则不是这样，它们是边或最短路径的和。但是，有一个中心性子集，比如基于随机游走的中心性子集，假设网络可以表示为一个辅助矩阵M，中心性是辅助矩阵M的函数。

例如，特征向量是特征值问题$Mx=λx$的封闭解。一般情况下，节点$v_i$的中心性可以表示为矩阵M的函数:
$$C(v_i)=f(M)|v_i$$
而且，只要f对一个简单的参数化t是可微的(这是特征向量中心和它的许多变体的情况)，C对那个变量也是可微的。使用链式法则:
$$\frac{∂C_E(v_i)}{∂t_j}=\frac{∂f}{∂M}\frac{∂M}{∂t_j}$$
其中$t_j$是一个节点的自变量。在我们的实验中，我们使用$t_j= \sum_{k} A_{kj}$作为节点的次数，其中a为邻接矩阵。一般来说，矩阵M可以采取邻接矩阵的形式，例如特征向量中心的情况，它的一个随机版本，如PageRank或拉普拉斯矩阵，对网络的低维嵌入非常有用。

这个分化过程产生一个密集的矩阵S，它对所有节点对之间的影响进行编码。分析这种影响的符号和程度有助于我们提取有意义的群体。研究发现，星团中心之间的星量导数最大，星团内部的星量导数较小。集群中的叶节点对集群中心的中心性有一点影响。然而，群集中心的一个对等点(极有可能是另一个群集中心)有很大的影响力。

我们还发现，对所有非边对的影响矩阵的大小进行阈值，有助于我们识别网络中的隐藏链接。图11.5显示了模拟通过电话形成社交网络的合成数据集。在这个数据集中，有一个隐藏的结构发生时，四个人决定换手机，创建两个身份。这种现象非常普遍，计算模型通常包含现实世界中其他个体的多个实例。解决这个问题的传统方法没有认识到这种关系。在我们的例子中，如图11.5(a)所示，节点连接图除了沿三个中心(其中边缘更密集)的节点明显集中外，无法提供结构的提示。在应用中心性导数后，我们可以通过只选择导数值最大的边来简化网络。结果如图11.5(b)所示。现在我们可以清楚地看到星团的结构了。此外，我们突出了具有最高导数的非边缘节点对，如灰色区域所示。形成这些对的对应节点(以灰色突出显示)恰好对应同一个人。建立这种隐式联系(在数据集中是不明确的)的可视化，有助于我们对网络进行更可靠的评估。我们现在可以把这个子网络看作是四个集群的集合，每个集群都以这些节点对为中心。
![avatar](D:/360downloads/5.png)
*图11.5。发现社交网络上的隐藏链接。左图:一个包含隐藏结构的合成社交网络使用强制布局来可视化。右:在应用基于中心性的分析后，我们发现群集中心之间没有直接联系的强联系。它们揭示了网络中隐藏的结构。*

# **四、代码实现**
```{r}
#Betweenness Centrality 中介中心性
library(igraph)
Betweenness<-function()
{
 file=file.choose()
 Graph=read.graph(file,format="pajek")
 Bet=betweenness(Graph,V(Graph),FALSE,NULL,TRUE,FALSE)
 write.table(Bet,"Betweenness.txt")
}
```

```{r}
#Closeness Centrality 接近中心性
library(igraph)
Closeness<-function()
{
 file=file.choose()
 Graph=read.graph(file,format="pajek")
 close=closeness(Graph,V(Graph),mode=c("out","in","all","total"),NULL,TRUE)
 write.table(close,"Closeness.txt")
}
```

```{r}
#Degree Centrality 度中心性 
library(igraph)
Degree<-function()
{
 file=file.choose()
 Graph=read.graph(file,format="pajek")
 deg=degree(Graph,V(Graph))
 write.table(deg,"Degree.txt")
}
```

# **五、总结**
社交网络应用程序显然正在推动信息可视化研究的几个领域。在过去，可视化扮演着非常被动的角色，仅仅是对网络的概述和耗时的结果的呈现，通常是无监督的分析。现在，可视化和交互作用有了更积极的作用。我们不仅看到了显示网络数据的新的和复杂的方法，使用独特的分析过程组合，如中心性分析和社区识别，而且我们还看到了可视化分析过程作为一种交互的、迭代的方法。即使在分析失败的时候，对社交网络的视觉研究也可能会把分析师的注意力吸引到那些看似不重要，但对手头的任务来说可能很重要的区域。

分析工具(如中心性和聚类分析)和交互技术的融合产生了强大的可视化解决方案。不像早期的系统更专注于这种网络的结构绘图，当前的可视化工具提供了前所未有的网络视图，能够根据复杂的度量(如基于中心性的随机漫步)对节点进行分组。语义聚类和过滤允许分析人员浏览与社交网络相关的大型多维数据。节点链接图不再是原始数据的忠实表示，由于混乱和重叠，通常提供很少的洞察力，但成为一个使用和有效的多维数据集“切片”。链接视图也变得越来越普遍。我们并不依赖于力指向节点布局提供给我们的通常被误导的解释，但我们拥有丰富的语义和统计观点，帮助我们理解不同空间中的社交网络结构。

社交网络的动态方面仍然是一个挑战。可视化研究人员多次指出，传统的图形和图表无法传达社交网络中的时间变化。如果我们想要了解社交网络是如何形成和发展的，就需要更有效的时间表达方式，而不仅仅是动画和时间滑块。

# **六、参考文献**
[1]Carlos D.Correa,Kwan-Liu Ma,Visualizing Social Networks
[2]Charu C.Aggarwal,Social Network Data Analytics 

